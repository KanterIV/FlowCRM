# REST API –¥–ª—è [ducksay-pwa](https://ducksay-pwa.com/) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

<br>

## –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —é–∑–µ—Ä–∞.

1. ### üîπ POST `/auth/register`

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è, —Å–æ–∑–¥–∞–Ω–∏–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –µ–≥–æ —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ã–π
–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä (WhatsApp) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏. –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∏ –ø—Ä–æ–º–æ-–∫–æ–¥—ã.

**üì• Request Body**:

```ts
{
  email: string,
  password: string,
  telegram: string,
  whatsapp: string,
  promoCode?: string,
  referralCode?: string,
  keitaro_subid?: string
}
```

<br>

**üì• Response**:

```ts
{
  message: string,
  success: boolean,
  data: {
    email: string,
    userId: string,
    unusedPromocode: null | string //–ø—Ä–æ–º–æ–∫–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ response –µ—Å–ª–∏ –µ–≥–æ –∏–ª—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ –¥–µ–ø–æ–∑–∏—Ç)
  }
}
```

2. ### üîπ POST `/auth/user-verification`

–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –í
—Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω
–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

<br>

> [!IMPORTANT]
>
> –¢–∞–∫ –∂–µ –≤–æ –≤—Ä–µ–º—è –≤–µ—Ä—Ñ–∏–∫–∞—Ü–∏:
>
> - –µ—Å–ª–∏ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å—Ç–∞—Ä–µ–ª –∏ –±—ã–ª —É–¥–∞–ª–µ–Ω –∏–∑ –±–∞–∑—ã - —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–æ–¥,
>   –∫–æ—Ç–æ—Ä—ã–π —é–∑–µ—Ä –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—Ç—Ä–µ–±–æ–≤–∞—Ç—å.
> - –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram –±–æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è
>   —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π
>   –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –Ω–∏–º ( —Ñ—É–Ω–∫—Ü–∏—è **_sendLeadInfoInTelegram()_** )

**üì• Request Body**:

```ts
{
  userId: string,
  verificationCode: string,
}
```

<br>

**üì§ Response**:

```ts
{
  success: boolean,
      code: number,
      message: string,
      data: {
        token: string,
      },
}
```

3. ### üîπ POST `/auth/resend-verification-code`

–ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –æ–¥–∏–Ω –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤: Telegram –∏–ª–∏ WhatsApp (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏
–∫–æ–¥ —É—Ç–µ—Ä—è–Ω –∏–ª–∏ –Ω–µ –¥–æ—à—ë–ª –ø—Ä–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

**üì• Request Body**:

```ts
{
  userId: string,
}
```

<br>

**üì§ Response**:

```ts
{
  success: boolean,
  code: number,
  message: string,
}
```

4. ### üîπ POST `/auth/login`

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT-—Ç–æ–∫–µ–Ω. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `userId` –∏
–¥–æ—Å—Ç—É–ø–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

> [!IMPORTANT]
>
> üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
>
> - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **_JWT_** —Å —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è **_30 –¥–Ω–µ–π_**
> - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **_keitaro_subid_**, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
> - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π **_referralCode_**, –µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç
> - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–æ—à—ë–ª –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é ‚Äî –≤—Ö–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è

**üì• Request Body**:

```ts
{
  email: string,
  password: string,
  keitaro_subid?: string,
}
```

<br>

**üì§ Response**:

_–ü–æ–ª—å–∑–æ–≤—Ç–µ–ª—å –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω_

```ts
{
  code: number,
  message: string,
  data: {
    verificationMode: 'telegram' | 'whatsapp' | 'viber' | null,
    userId: string,
  };
}
```

_–ü–æ–ª—å–∑–æ–≤—Ç–µ–ª—å –≤–µ—Ä–∏–≤–∏—Ü–∏—Ä–æ–≤–∞–Ω_

```ts
{
  success: boolean,
  code: number,
  message: string,
  data: {
    token: string,
  };
}
```

5. ### üîπ POST `/auth/forgot-password`

–ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—Å—ã–ª–∫—É —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º
—Ç–æ–∫–µ–Ω–æ–º (–¥–µ–π—Å—Ç–≤—É–µ—Ç 10 –º–∏–Ω—É—Ç). –ï—Å–ª–∏ email –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞.
–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –ø–æ–ª—é `locale`.

> [!IMPORTANT]
>
> üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
>
> - –¢–æ–∫–µ–Ω **_(passwordResetToken)_** –∂–∏–≤—ë—Ç 10 –º–∏–Ω—É—Ç
> - –°—Å—ã–ª–∫–∞ —Å–±—Ä–æ—Å–∞: **_https://ducksay-pwa.com?forgotPass=TOKEN_**
> - –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **_Amazon SES_**

**üì• Request Body**:

```ts
{
  email: string,
  locale?: string,
}
```

<br>

**üì§ Response**:

```ts
{
  success: boolean,
  message: string,
}
```

6. ### üîπ PATCH `/auth/reset-password/:token`

–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ä–∞–Ω–µ–µ –≤—ã—Å–ª–∞–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç JWT-—Ç–æ–∫–µ–Ω –∏–∑
–ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `:token`, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –∏ —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –ë–î.

**üì• Request Body**:

```ts
{
  password: string,
}
```

<br>

**üì§ Response**:

```ts
{
  message: string,
}
```

7. ### üîπ POST `/auth/logout`

–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

```ts
{
  success: boolean,
}
```

<br>

## –ö–µ–π—Å - cors error

```bash
pm2 stop ducksay-express
npm run dev
Ctrl + C
pm2 start ducksay-express
```
